# FFA えふ改
いく氏の作成されたFFA いく改をnode.js+ejsでリマスターしたものになります．
express-generatorで生成されたプログラムを基に作成しています．


## いじりかた
弄りたい箇所に相当するファイルを弄ってね．何がどこにあるかは後述．

### /bin/www
バイナリ このコマンド叩いて起動してね

### /routes/*.js
サーバ側の処理が記述されています．.get～がアクセスされたときの処理，.postがユーザがなんかボタン押したときの処理です．

### /views/*.ejs
ユーザ側の画面描画が記述されています．.ejsとかあるけど殆どHTMLだよ！ejsがよくわからなかったらejsでググってください．

### /detabases/*
敵，ユーザ，技，職業等，データが(現状)平文のJSON形式で保存されています．

### /app.js
router.jsにファイルを追加する際に触ることになるファイルです．

### /setUsers.js
セッションの情報を各ページに渡すための関数です．



## スタミナについて
いちいち何処かに保存などはしておらず，スタミナの情報が必要になり次第逐次最終戦闘時刻から計算しています．
なお，スタミナ計算アルゴリズムの都合上最終戦闘時刻は現在時刻から最大540秒程度ずれます．仕様ですのでご安心ください．

## 各種データについて
### ユーザデータ，敵データ，チャンプデータ
JSON形式で外部ファイルに保存し，必要になり次第ロードする形式
### 技，武器，防具，装飾品，道具のデータ
メソッドを持つため，プログラムに埋め込んだ．道具そのものの情報はinformations以下，効果はeffects以下にそれぞれ記述．